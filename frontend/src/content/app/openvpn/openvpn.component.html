<div class="d-flex flex-row">
    <h1 class="flex-grow-1">Certificats list</h1>
    <div class="actions">
        <button class="btn btn-outline-primary" (click)="createClientCertificate()">New</button>
        <button class="btn btn-outline-secondary" (click)="toggleHideRevoked()">{{hideRevoked? 'Show': 'Hide'}} revoked</button>
    </div>
</div>

<!--<div>Websocket status: {{clients.status}}</div>-->

<!--[[[-->
<!--<mat-slider min="1" max="100" step="1" value="50"></mat-slider>-->
<!--]]]-->
<table mat-table [dataSource]="dataSource" matSort (matSortChange)="sortData($event)" style="width: 100%" class="mat-elevation-z8">
    <ng-container matColumnDef="username">
        <th mat-header-cell *matHeaderCellDef mat-sort-header="username">Common&nbsp;Name</th>
        <td mat-cell *matCellDef="let element"> {{element.username}} </td>
    </ng-container>
    <ng-container matColumnDef="identity">
        <th mat-header-cell *matHeaderCellDef mat-sort-header="identity">Identity</th>
        <td mat-cell *matCellDef="let element"> {{element.identity}} </td>
    </ng-container>
    <ng-container matColumnDef="accountStatus">
        <th mat-header-cell *matHeaderCellDef mat-sort-header="accountStatus">Account Status</th>
        <td mat-cell *matCellDef="let element"> {{element.accountStatus}} </td>
    </ng-container>
    <ng-container matColumnDef="connections">
        <th mat-header-cell *matHeaderCellDef mat-sort-header="connections">Active Connections</th>
        <td mat-cell *matCellDef="let element"> {{element.connections.length}} </td>
    </ng-container>
    <ng-container matColumnDef="upload-download">
        <th mat-header-cell *matHeaderCellDef mat-sort-header="upload-download">Received/Transmitted</th>
        <td mat-cell *matCellDef="let element"> {{element.connections.length}} </td>
    </ng-container>
    <ng-container matColumnDef="expirationDate">
        <th mat-header-cell *matHeaderCellDef mat-sort-header="expirationDate">Expiration Date</th>
        <td mat-cell *matCellDef="let element"> {{element.expirationDate | date:'yyyy/MM/dd HH:mm:ss'}} </td>
    </ng-container>
    <ng-container matColumnDef="revocationDate">
        <th mat-header-cell *matHeaderCellDef mat-sort-header="revocationDate">Revocation Date</th>
        <td mat-cell *matCellDef="let element"> {{element.revocationDate | date:'yyyy/MM/dd HH:mm:ss'}} </td>
    </ng-container>
    <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef mat-sort-header="actions">Actions</th>
        <td mat-cell *matCellDef="let element">
            <button class="btn btn-warning btn-sm" *ngIf="!element.revocationDate" (click)="revokeClientCertificate(element)">revoke</button>
            <button class="btn btn-danger btn-sm" *ngIf="element.revocationDate" (click)="deleteClientCertificate(element)">delete</button>
            <button class="btn btn-warning btn-sm" *ngIf="element.revocationDate" (click)="rotateClientCertificate(element)">rotate</button>
            <button class="btn btn-info btn-sm" *ngIf="!element.revocationDate" (click)="downloadOpenvpnConfig(element)">download</button>
            <button class="btn btn-primary btn-sm" *ngIf="!element.revocationDate" (click)="editClient(element)">edit routes</button>
            <button class="btn btn-primary btn-sm" *ngIf="element.revocationDate" (click)="unrevokeClientCertificate(element)">unrevoke</button>
        </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

</table>
